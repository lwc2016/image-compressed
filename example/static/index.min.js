"use strict";!function(u){function e(e,t,a){var r=new FileReader,o=e.name,u=e.Type,d=t.limitSize;if(!d)return a(e);if(isNaN(d))throw new Error("limitSize must be a number");if(d<0)throw new Error("limitSize must not small then 0");if(e.size<=d)return a(e);r.onload=function(){var i=new Image;i.onload=function(){for(var e=function(e,t,r){var n=document.createElement("canvas"),i=document.createAttribute("width");i.nodeValue=e;var a=document.createAttribute("height");a.nodeValue=t,n.setAttributeNode(i),n.setAttributeNode(a);var o=n.getContext("2d");return o.fillRect(0,0,e,t),o.drawImage(r,0,0,e,t),n}(this.naturalWidth,this.naturalHeight,i),t=.95,r=e.toDataURL("image/jpeg",t),n=l(r,o,u);n.size>=d;)t-=.05,n=l(r=e.toDataURL("image/jpeg",t),o,u);a(n)},i.src=r.result},r.readAsDataURL(e)}function l(e,t,r){for(var n=u.atob(e.split(",")[1]),i=new ArrayBuffer(n.length),a=new Uint8Array(i),o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return new File([a],t,{type:r,lastModified:Date.now()})}"undefined"!=typeof module?module.exports=e:u.imageCompressed=e}(window);